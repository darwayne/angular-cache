!function(a,b){"use strict";function c(){this.$get=["$timeout","$q",function(a){function c(a){var b={};for(var c in a)a.hasOwnProperty(c)&&(b[c]=c);return b}function d(a){var b=[];for(var c in a)a.hasOwnProperty(c)&&b.push(c);return b}function e(e,f){function h(b,c){s[b].timeoutId=a(function(){w.remove(b)},c)}function i(a,c){b.isNumber(a)?0>a?c("must be greater than zero!",a):c(null,a):c("must be a number!",a)}function j(a,b){a===Number.MAX_VALUE?(r.capacity=a,b(null,r.capacity)):i(a,function(a,c){if(a)b(a,c);else{for(r.capacity=c;q>r.capacity;)w.remove(v.key);b(null,r.capacity)}})}function k(a,b){null===a?(r.aggressiveDelete=!1,b(null,r.aggressiveDelete)):a===!0||a===!1?(r.aggressiveDelete=a,b(null,r.aggressiveDelete)):b("must be a boolean!",a)}function l(b,c){var e=d(s);if(null===b){r.maxAge=b;for(var f=0;f<e.length;f++){var g=e[f];s[g].timeoutId&&!s[g].maxAge&&a.cancel(s[g].timeoutId)}c(null,r.maxAge)}else i(b,function(b,d){if(b)c(b,d);else{r.maxAge=d;for(var f=0;f<e.length;f++){var g=e[f];if(s[g].timeoutId&&!s[g].maxAge){a.cancel(s[g].timeoutId);var i=(new Date).getTime()-s[g].timestamp;r.maxAge-i>0&&r.aggressiveDelete?h(g,r.maxAge):w.remove(g)}}c(null,r.maxAge)}})}function m(b,c){r.cacheFlushIntervalId&&(clearInterval(r.cacheFlushIntervalId),delete r.cacheFlushIntervalId),null===b?(r.cacheFlushInterval=b,c(null,r.cacheFlushInterval)):i(b,function(b,e){b?c(b,e):(r.cacheFlushInterval=e,r.cacheFlushIntervalId=setInterval(function(){for(var b=d(s),c=0;c<b.length;c++){var e=b[c];s[e].timeoutId&&a.cancel(s[e].timeoutId)}q=0,s={},t={},u=null,v=null},r.cacheFlushInterval),c(null,r.cacheFlushInterval))})}function n(a,b){b=b||!1,(a.capacity||b)&&j(a.capacity?a.capacity:Number.MAX_VALUE,function(a){if(a)throw new Error("capacity: "+a)}),(a.hasOwnProperty("aggressiveDelete")||b)&&k(a.hasOwnProperty("aggressiveDelete")?a.aggressiveDelete:null,function(a){if(a)throw new Error("aggressiveDelete: "+a)}),a.maxAge||b||(a.maxAge=r.maxAge),(a.maxAge||b)&&l(a.maxAge?a.maxAge:null,function(a){if(a)throw new Error("maxAge: "+a)}),(a.cacheFlushInterval||b)&&m(a.cacheFlushInterval?a.cacheFlushInterval:null,function(a){if(a)throw new Error("cacheFlushInterval: "+a)})}function o(a){a!==u&&(v?v===a&&(v=a.n):v=a,p(a.n,a.p),p(a,u),u=a,u.n=null)}function p(a,b){a!==b&&(a&&(a.p=b),b&&(b.n=a))}var q=0,r=b.extend({},{id:e}),s={},t={},u=null,v=null,w=this;f=f||{},f.hasOwnProperty("aggressiveDelete")||(f.aggressiveDelete=!1),n(f,!0),this.put=function(c,d,e){var f=t[c]||(t[c]={key:c});if(!b.isString(c))throw new Error("The key must be a string!");if(e&&e.maxAge&&i(e.maxAge,function(a){if(a)throw new Error("AngularCache.put(): maxAge: "+a)}),e&&e.hasOwnProperty("aggressiveDelete")&&e.aggressiveDelete!==!0&&e.aggressiveDelete!==!1)throw new Error("AngularCache.put(): aggressiveDelete must be a boolean!");return o(f),b.isUndefined(d)?void 0:(c in s||q++,s[c]={value:d},e&&e.hasOwnProperty("aggressiveDelete")&&(s[c].aggressiveDelete=e.aggressiveDelete),(e&&e.maxAge||r.maxAge)&&(s[c].timestamp=(new Date).getTime(),s[c].timeoutId&&a.cancel(s[c].timeoutId),(s[c].aggressiveDelete||!s[c].hasOwnProperty("aggressiveDelete")&&r.aggressiveDelete)&&h(c,e&&e.maxAge||r.maxAge)),q>r.capacity&&this.remove(v.key),d)},this.get=function(a){var b,c,d=t[a];if(d)return b=s[a].maxAge||r.maxAge,c=s[a].hasOwnProperty("aggressiveDelete")?s[a].aggressiveDelete:r.aggressiveDelete,!c&&b&&(new Date).getTime()-s[a].timestamp>b?(this.remove(a),d=null,void 0):(o(d),s[a].value)},this.remove=function(a){var b=t[a];b&&(b===u&&(u=b.p),b===v&&(v=b.n),p(b.n,b.p),delete t[a],delete s[a],q--)},this.removeAll=function(){s={},q=0,t={},u=null,v=null},this.destroy=function(){clearInterval(r.cacheFlushIntervalId),s=null,r=null,t=null,delete g[e]},this.info=function(){return b.extend({},r,{size:q})},this.keySet=function(){return c(s)},this.keys=function(){return d(s)},this.setOptions=n}function f(a,c){if(a in g)throw new Error("cacheId "+a+" taken!");if(!b.isString(a))throw new Error("cacheId must be a string!");return g[a]=new e(a,c),g[a]}var g={};return f.info=function(){for(var a={},b=d(g),c=0;c<b.length;c++){var e=b[c];a[e]=g[e].info()}return a},f.get=function(a){return g[a]},f.keySet=function(){return c(g)},f.keys=function(){return d(g)},f}]}b.module("angular-cache",["ng"]),b.module("angular-cache").provider("$angularCacheFactory",c)}(window,window.angular);